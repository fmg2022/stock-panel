---
import { categoriesAccesory } from "../lib/data";

const typesList = Object.values(categoriesAccesory);

const classSelect =
  "bg-slate-300/20 text-zinc-800 checked:text-gray-800 checked:bg-slate-300/60";
---

<div class="relative">
  <label for="selectCat" class="absolute top-[-24px] left-1 text-slate-600">
    <small>Categorias</small>
  </label>
  <select
    id="selectCat"
    class="bg-zinc-50 border border-slate-300 text-gray-900 rounded-lg focus:ring focus:ring-opacity-40 focus:ring-blue-300 focus:border-blue-400 focus:outline-none p-2.5"
  >
    <option value="" class={classSelect}>Todos</option>
    {
      typesList.map((tipo) => (
        <option value={tipo} class={classSelect}>
          {tipo.replace(/^./, (char) => char.toUpperCase())}
        </option>
      ))
    }
  </select>
</div>

<script>
  import { currentFilter } from "../store/stockStore";

  const $select = document.getElementById("selectCat");

  $select?.addEventListener("change", (event) => {
    const { target } = event;
    const selectedOption = (target as HTMLSelectElement).value;
    currentFilter.set(selectedOption);
  });
</script>
